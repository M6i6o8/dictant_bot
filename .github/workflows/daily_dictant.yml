name: üá¨üáß –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∏–∫—Ç–∞–Ω—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ

on:
  schedule:
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–∞–∂–¥—ã–π —á–∞—Å, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—ã–µ —á–∞—Å—ã
    # UTC 6:00 = MSK 9:00
    # UTC 7:00 = MSK 10:00
    - cron: '0 6,7 * * *'
  workflow_dispatch:  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∞

jobs:
  send_dictant:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      uses: actions/checkout@v3
      
    - name: üêç –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        
    - name: üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: |
        pip install requests
        
    - name: ü§ñ –ó–∞–ø—É—Å–∫–∞–µ–º –¥–∏–∫—Ç–∞–Ω—Ç
      env:
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
        CHAT_ID: ${{ secrets.CHAT_ID }}
      run: python dictant_bot.py
      
    - name: üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      uses: actions/upload-artifact@v3
      with:
        name: last-sentence
        path: last_sentence.txt
        retention-days: 1  # –•—Ä–∞–Ω–∏–º –æ–¥–∏–Ω –¥–µ–Ω—å, –¥–∞–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ
